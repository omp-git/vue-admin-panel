(function(t){function e(e){for(var n,i,a=e[0],u=e[1],l=e[2],d=0,p=[];d<a.length;d++)i=a[d],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&p.push(s[i][0]),s[i]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(t[n]=u[n]);c&&c(e);while(p.length)p.shift()();return o.push.apply(o,l||[]),r()}function r(){for(var t,e=0;e<o.length;e++){for(var r=o[e],n=!0,a=1;a<r.length;a++){var u=r[a];0!==s[u]&&(n=!1)}n&&(o.splice(e--,1),t=i(i.s=r[0]))}return t}var n={},s={app:0},o=[];function i(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=n,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],u=a.push.bind(a);a.push=e,a=a.slice();for(var l=0;l<a.length;l++)e(a[l]);var c=u;o.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"0341":function(t,e,r){"use strict";r("d991")},"034f":function(t,e,r){"use strict";r("85ec")},"035d":function(t,e,r){"use strict";r("cb6f")},"1a60":function(t,e,r){"use strict";r("4000")},4e3:function(t,e,r){},"407b":function(t,e,r){},"4c0b":function(t,e,r){"use strict";r("db3a")},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("app-header"),r("router-view")],1)},o=[],i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("header",{attrs:{id:"header"}},[r("div",{staticClass:"logo"},[r("router-link",{attrs:{to:"/"}},[t._v("Vue - Complete Guide")])],1),r("nav",[r("ul",[t.auth?t._e():r("li",[r("router-link",{attrs:{to:"/signup"}},[t._v("Sign Up")])],1),t.auth?t._e():r("li",[r("router-link",{attrs:{to:"/signin"}},[t._v("Sign In")])],1),t.auth?r("li",[r("router-link",{attrs:{to:"/dashboard"}},[t._v("Dashboard")])],1):t._e(),t.auth?r("button",{staticClass:"logout",on:{click:t.onLogout}},[t._v("Logout")]):t._e()])])])},a=[],u={computed:{auth:function(){return this.$store.getters.isAuthenticated}},methods:{onLogout:function(){this.$store.dispatch("logout")}}},l=u,c=(r("4c0b"),r("2877")),d=Object(c["a"])(l,i,a,!1,null,"12e55052",null),p=d.exports,m={name:"app",components:{"app-header":p},created:function(){this.$store.dispatch("tryAutoLogin")}},v=m,f=(r("034f"),Object(c["a"])(v,s,o,!1,null,null,null)),h=f.exports,b=r("e399"),g=r.n(b),_=(r("6705"),r("1dce")),w=r.n(_),y=r("8c4f"),$=(r("d3b7"),r("2f62")),k=r("bc3a"),x=r.n(k),I=x.a.create({baseURL:"https://imi24.com/api"}),C=I;n["a"].use($["a"]);var S=new $["a"].Store({state:{idToken:null,userId:null},mutations:{authUser:function(t,e){t.idToken=e.token,t.userId=e.userId,localStorage.setItem("_uid",e.userId),localStorage.setItem("_token",e.token),localStorage.setItem("_expires",e.expiresIn),et.push("/dashboard").catch((function(){}))},clearAuthUser:function(t){t.idToken=null,t.userId=null,localStorage.setItem("_uid",null),localStorage.setItem("_token",null),localStorage.setItem("_expires",null),et.push("/signin").catch((function(){}))}},actions:{login:function(t,e){var r=t.commit,n=t.dispatch;return new Promise((function(t,s){C.post("auth/vue-login",{mobile:e.mobile,password:e.password}).then((function(e){var s=e.data;if(s.status&&(console.log("login: ",s),r("authUser",{token:s.access_token,expiresIn:s.expires_in,userId:s.u_id}),s.expires_in)){var o=s.expires_in-P();n("setLogoutTime",o)}t(e)})).catch((function(t){console.log("err:",t),s(t)}))}))},tryAutoLogin:function(t){var e=t.commit,r=t.dispatch,n=localStorage.getItem("_token");if("undefined"!=typeof n&&null!==n&&"null"!==n){var s=localStorage.getItem("_expires"),o=P();if(!(o>=s)){var i=localStorage.getItem("_uid");e("authUser",{token:n,expiresIn:s,userId:i});var a=s-o;r("setLogoutTime",a)}}},logout:function(t){var e=t.commit;e("clearAuthUser")},setLogoutTime:function(t,e){var r=t.dispatch;console.log("timeout: ",1e3*e),setTimeout((function(){r("logout")}),1e3*e)}},getters:{isAuthenticated:function(t){return null!==t.idToken},token:function(t){return t.idToken},uId:function(t){return t.userId}}});function P(){var t=new Date;return Math.floor(t.getTime()/1e3)}var O=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"welcome"}},[r("h1",[t._v("Time to learn something new!")]),r("p",[t._v("You found the best place to learn - and now you're just one sign in (or sign up) away from it!")]),r("div",{staticClass:"cta"},[r("router-link",{attrs:{to:"/signup"}},[t._v("Sign Up")]),r("router-link",{attrs:{to:"/signin"}},[t._v("Sign In")])],1)])},j=[],A=(r("1a60"),{}),T=Object(c["a"])(A,O,j,!1,null,"1d9c0502",null),L=T.exports,N=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"dashboard"}},[r("div",[r("h1",[t._v("That's the dashboard.")]),t.auth&&""!=t.fullName?r("h2",{staticClass:"auth"},[t._v("Your are logged in! ("+t._s(t.fullName)+")")]):t._e(),t.auth?t._e():r("h2",{staticClass:"gest"},[t._v("Your are not logged in!")])]),t.auth?r("div",{staticClass:"user-list"},[r("h4",[t._v("User List")]),r("hr"),r("div",[r("ul",t._l(t.users,(function(e,n){return r("li",{key:n},[t._v(t._s(n+1+" - "+e.name))])})),0)])]):t._e()])},E=[],U={data:function(){return{fullName:"",users:[]}},computed:{auth:function(){return this.$store.getters.isAuthenticated}},created:function(){var t=this;this.auth&&(C.post("auth/vue-login-user",{token:this.$store.getters.token,_id:this.$store.getters.uId}).then((function(e){var r=e.data;if(r.status){var n=r.user;t.fullName=n.fname+" "+n.lname}else t.$store.dispatch("logout")})).catch((function(t){return console.log(t)})),C.post("auth/vue-user-list",{token:this.$store.getters.token}).then((function(e){var r=e.data;if(r.status){var n=r.users;t.users=n}else t.$store.dispatch("logout")})).catch((function(t){return console.log(t)})))}},M=U,q=(r("8963"),Object(c["a"])(M,N,E,!1,null,"e480e45c",null)),D=q.exports,H=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"signup"}},[r("div",{staticClass:"signup-form"},[r("form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[r("div",{staticClass:"input"},[r("label",{attrs:{for:"email"}},[t._v("Mail")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{type:"email",id:"email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),r("div",{staticClass:"input"},[r("label",{attrs:{for:"age"}},[t._v("Your Age")]),r("input",{directives:[{name:"model",rawName:"v-model.number",value:t.age,expression:"age",modifiers:{number:!0}}],attrs:{type:"number",id:"age"},domProps:{value:t.age},on:{input:function(e){e.target.composing||(t.age=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),r("div",{staticClass:"input"},[r("label",{attrs:{for:"password"}},[t._v("Password")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",id:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),r("div",{staticClass:"hobbies"},[r("h3",[t._v("Add some Hobbies")]),r("button",{attrs:{type:"button"},on:{click:t.onAddHobby}},[t._v("Add Hobby")]),r("div",{staticClass:"hobby-list"},t._l(t.hobbyInputs,(function(e,n){return r("div",{key:e.id,staticClass:"input"},[r("label",{attrs:{for:e.id}},[t._v("Hobby #"+t._s(n))]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"hobbyInput.value"}],attrs:{type:"text",id:e.id},domProps:{value:e.value},on:{input:function(r){r.target.composing||t.$set(e,"value",r.target.value)}}}),r("button",{attrs:{type:"button"},on:{click:function(r){return t.onDeleteHobby(e.id)}}},[t._v("X")])])})),0)]),r("div",{staticClass:"input inline"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.terms,expression:"terms"}],attrs:{type:"checkbox",id:"terms"},domProps:{checked:Array.isArray(t.terms)?t._i(t.terms,null)>-1:t.terms},on:{change:function(e){var r=t.terms,n=e.target,s=!!n.checked;if(Array.isArray(r)){var o=null,i=t._i(r,o);n.checked?i<0&&(t.terms=r.concat([o])):i>-1&&(t.terms=r.slice(0,i).concat(r.slice(i+1)))}else t.terms=s}}}),r("label",{attrs:{for:"terms"}},[t._v("Accept Terms of Use")])]),t._m(0)])])])},Y=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"submit"},[r("button",{attrs:{type:"submit"}},[t._v("Submit")])])}],B=(r("4de4"),r("d81d"),{data:function(){return{email:"",age:null,password:"",confirmPassword:"",country:"usa",hobbyInputs:[],terms:!1}},methods:{onAddHobby:function(){var t={id:Math.random()*Math.random()*1e3,value:""};this.hobbyInputs.push(t)},onDeleteHobby:function(t){this.hobbyInputs=this.hobbyInputs.filter((function(e){return e.id!==t}))},onSubmit:function(){var t={email:this.email,age:this.age,password:this.password,confirmPassword:this.confirmPassword,country:this.country,hobbies:this.hobbyInputs.map((function(t){return t.value})),terms:this.terms};console.log(t)}}}),J=B,G=(r("035d"),Object(c["a"])(J,H,Y,!1,null,"53e9d4e8",null)),R=G.exports,V=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"signin"}},[r("div",{staticClass:"signin-form"},[r("h2",{staticClass:"title"},[t._v("Login")]),r("form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[r("div",{staticClass:"input",class:{invalid:t.$v.mobile.$error}},[r("label",{attrs:{for:"mobile"}},[t._v("Mobile Number")]),r("input",{directives:[{name:"model",rawName:"v-model.trim.number",value:t.mobile,expression:"mobile",modifiers:{trim:!0,number:!0}}],attrs:{type:"text",id:"mobile"},domProps:{value:t.mobile},on:{blur:[function(e){return t.$v.mobile.$touch()},function(e){return t.$forceUpdate()}],input:function(e){e.target.composing||(t.mobile=t._n(e.target.value.trim()))}}}),!t.$v.mobile.required&&t.$v.mobile.$dirty?r("span",{staticClass:"error-msg"},[t._v("Mobile-Number field is requird.")]):t._e(),t.$v.mobile.valid?t._e():r("span",{staticClass:"error-msg"},[t._v("Mobile-Number format is invalid.")])]),r("div",{staticClass:"input",class:{invalid:t.$v.password.$error}},[r("label",{attrs:{for:"password"}},[t._v("Password")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",id:"password"},domProps:{value:t.password},on:{blur:function(e){return t.$v.password.$touch()},input:function(e){e.target.composing||(t.password=e.target.value)}}}),!t.$v.password.required&&t.$v.password.$dirty?r("span",{staticClass:"error-msg"},[t._v("Password field is requird.")]):t._e(),!t.$v.password.minLen&&t.$v.password.$dirty?r("span",{staticClass:"error-msg"},[t._v("Password field must at least "+t._s(t.$v.password.$params.minLen.min)+" characters.")]):t._e()]),t._m(0)])])])},X=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"submit"},[r("button",{attrs:{type:"submit"}},[t._v("Submit")])])}],z=r("b5ae"),F=z["helpers"].regex("mobile",/^9(1[0-9]|3[1-9]|2[1-9])( |-)?[0-9]{3}( |-)?[0-9]{4}$/),K={data:function(){return{mobile:"9371071458",password:"123123123",connd:!0,serverErrors:{mobile:null,password:null}}},validations:{mobile:{required:z["required"],valid:F},password:{required:z["required"],minLen:Object(z["minLength"])(6)}},methods:{onSubmit:function(){var t=this,e={mobile:this.mobile,password:this.password};this.$v.$touch(),!this.$v.$invalid&&this.$v.$anyDirty?this.$store.dispatch("login",{mobile:e.mobile,password:e.password}).then((function(e){if(e.data.status)t.$toast.success("You logged in successfully !","Back-End"),t.password="";else{console.log(e.data);var r=e.data.errors;for(var n in r)t.$toast.error(r[n],"Back-End")}})):console.log("not sumbit")}}},Q=K,W=(r("0341"),Object(c["a"])(Q,V,X,!1,null,"6316b066",null)),Z=W.exports;n["a"].use(y["a"]);var tt=[{path:"/",component:L},{path:"/signup",component:R},{path:"/signin",component:Z},{path:"/dashboard",component:D,beforeEnter:function(t,e,r){S.state.idToken?r():r("/signin")}}],et=new y["a"]({mode:"history",routes:tt});n["a"].use(g.a),n["a"].use(w.a),new n["a"]({el:"#app",router:et,store:S,render:function(t){return t(h)}})},"85ec":function(t,e,r){},8963:function(t,e,r){"use strict";r("407b")},cb6f:function(t,e,r){},d991:function(t,e,r){},db3a:function(t,e,r){}});
//# sourceMappingURL=app.df22c995.js.map